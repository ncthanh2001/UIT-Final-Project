<mxfile host="app.diagrams.net" modified="2024-01-14T10:00:00.000Z" agent="Mozilla/5.0" version="22.1.0" etag="flowchart-cpsat" type="device">
  <diagram id="flowchart-cpsat" name="Flowchart - CP-SAT Algorithm">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Flowchart: Thuật Toán CP-SAT cho Job Shop Scheduling" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#1a237e;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="500" height="30" as="geometry" />
        </mxCell>

        <!-- Start -->
        <mxCell id="start" value="BẮT ĐẦU" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="60" width="100" height="40" as="geometry" />
        </mxCell>

        <!-- Step 1: Input -->
        <mxCell id="step1" value="Nhập dữ liệu đầu vào:&#xa;- Danh sách Work Orders&#xa;- Danh sách máy móc&#xa;- Thời gian xử lý&#xa;- Deadline các đơn hàng" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="120" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="start" target="step1">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Step 2: Create Model -->
        <mxCell id="step2" value="Khởi tạo mô hình CP-SAT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="230" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="step1" target="step2">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Step 3: Create Variables -->
        <mxCell id="step3" value="Tạo biến quyết định&#xa;cho mỗi Operation:&#xa;• start_time (thời điểm bắt đầu)&#xa;• end_time (thời điểm kết thúc)&#xa;• interval (khoảng thời gian)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="290" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="step2" target="step3">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Step 4: Add Constraints Box -->
        <mxCell id="constraints-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="1000" height="200" as="geometry" />
        </mxCell>
        <mxCell id="constraints-title" value="THÊM CÁC RÀNG BUỘC" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="430" y="405" width="200" height="25" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="step3" target="constraints-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="380" as="sourcePoint" />
            <mxPoint x="530" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Constraint 1: Precedence -->
        <mxCell id="c1" value="Ràng buộc&#xa;THỨ TỰ&#xa;(Precedence)&#xa;&#xa;Op₁ kết thúc&#xa;trước khi Op₂&#xa;bắt đầu" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 2: No-Overlap -->
        <mxCell id="c2" value="Ràng buộc&#xa;KHÔNG TRÙNG&#xa;(No-Overlap)&#xa;&#xa;Mỗi máy chỉ&#xa;xử lý 1 công&#xa;việc tại 1 thời&#xa;điểm" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="210" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 3: Machine Eligibility -->
        <mxCell id="c3" value="Ràng buộc&#xa;MÁY PHÙ HỢP&#xa;(Eligibility)&#xa;&#xa;Operation chỉ&#xa;được gán cho&#xa;máy có khả&#xa;năng xử lý" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 4: Working Hours -->
        <mxCell id="c4" value="Ràng buộc&#xa;GIỜ LÀM VIỆC&#xa;(Working Hours)&#xa;&#xa;Operation phải&#xa;nằm trong ca&#xa;làm việc của&#xa;máy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="490" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 5: Due Date -->
        <mxCell id="c5" value="Ràng buộc&#xa;DEADLINE&#xa;(Due Date)&#xa;&#xa;Phạt nếu hoàn&#xa;thành trễ hơn&#xa;deadline đơn&#xa;hàng" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 6: Setup Time -->
        <mxCell id="c6" value="Ràng buộc&#xa;SETUP TIME&#xa;&#xa;Thêm thời gian&#xa;chuyển đổi&#xa;giữa các sản&#xa;phẩm khác&#xa;loại" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="770" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Constraint 7: Capacity -->
        <mxCell id="c7" value="Ràng buộc&#xa;CÔNG SUẤT&#xa;(Capacity)&#xa;&#xa;Không vượt&#xa;quá công suất&#xa;tối đa của&#xa;máy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="910" y="450" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Step 5: Set Objective -->
        <mxCell id="step5" value="Thiết lập HÀM MỤC TIÊU:&#xa;Minimize (α × Makespan + β × Σ Tardiness)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="380" y="620" width="300" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="constraints-box" target="step5">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Step 6: Solve -->
        <mxCell id="step6" value="Chạy CP-SAT Solver&#xa;(max_time = 300 giây)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="690" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="step5" target="step6">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Decision: Solution Found? -->
        <mxCell id="decision" value="Tìm được&#xa;lời giải?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="760" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arrow7" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="step6" target="decision">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- Yes Path -->
        <mxCell id="output" value="Xuất kết quả:&#xa;• Lịch sản xuất tối ưu&#xa;• Gantt Chart&#xa;• Metrics (makespan, tardiness)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="750" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-yes" value="Có" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#82b366;" edge="1" parent="1" source="decision" target="output">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- No Path -->
        <mxCell id="fallback" value="Sử dụng FIFO&#xa;(First In First Out)&#xa;làm lịch dự phòng" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=center;" vertex="1" parent="1">
          <mxGeometry x="210" y="755" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="arrow-no" value="Không" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#b85450;" edge="1" parent="1" source="decision" target="fallback">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>

        <!-- End -->
        <mxCell id="end" value="KẾT THÚC" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="850" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="arrow-end1" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="output" target="end">
          <mxGeometry width="50" height="50" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-end2" value="" style="endArrow=classic;html=1;strokeWidth=2;" edge="1" parent="1" source="fallback" target="end">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="285" y="870" />
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>