{
 "actions": [],
 "allow_rename": 1,
 "creation": "2025-12-21 14:23:41.508810",
 "description": "Luu lich su va tham so cua moi lan chay lap lich san xuat (APS Scheduling).",
 "doctype": "DocType",
 "engine": "InnoDB",
 "field_order": [
  "section_basic",
  "production_plan",
  "run_status",
  "column_break_1",
  "scheduling_strategy",
  "scheduling_tier",
  "run_date",
  "executed_by",
  "section_approval",
  "total_operations",
  "applied_operations",
  "column_break_approval",
  "applied_at",
  "applied_by",
  "section_constraints",
  "constraint_machine_eligibility",
  "constraint_precedence",
  "constraint_no_overlap",
  "column_break_constraints",
  "constraint_working_hours",
  "constraint_due_dates",
  "constraint_setup_time",
  "constraints_description",
  "section_comparison",
  "baseline_makespan_minutes",
  "baseline_late_jobs",
  "baseline_total_tardiness",
  "column_break_comparison",
  "improvement_makespan_percent",
  "improvement_late_jobs_percent",
  "improvement_tardiness_percent",
  "comparison_summary",
  "section_solver_config",
  "time_limit_seconds",
  "min_gap_between_ops",
  "column_break_solver",
  "makespan_weight",
  "tardiness_weight",
  "section_result",
  "total_job_cards",
  "total_late_jobs",
  "jobs_on_time",
  "column_break_result",
  "solver_status",
  "solve_time_seconds",
  "gap_percentage",
  "section_metrics",
  "makespan_minutes",
  "total_tardiness_minutes",
  "column_break_metrics",
  "machine_utilization",
  "section_llm_analysis",
  "llm_analysis_button",
  "llm_analysis_language",
  "column_break_llm",
  "llm_analysis_date",
  "llm_analysis_model",
  "llm_analysis_content",
  "section_meta",
  "notes"
 ],
 "fields": [
  {
   "fieldname": "section_basic",
   "fieldtype": "Section Break",
   "label": "Scheduling Run Information"
  },
  {
   "description": "ERPNext Production Plan - automatically creates Work Orders and Job Cards",
   "fieldname": "production_plan",
   "fieldtype": "Link",
   "label": "Production Plan",
   "link_filters": "[[\"Production Plan\",\"status\",\"!=\",\"Completed\"]]",
   "options": "Production Plan",
   "reqd": 1
  },
  {
   "default": "Pending",
   "fieldname": "run_status",
   "fieldtype": "Select",
   "in_list_view": 1,
   "label": "Run Status",
   "options": "Pending\nRunning\nPending Approval\nApplied\nCompleted\nFailed",
   "reqd": 1
  },
  {
   "fieldname": "column_break_1",
   "fieldtype": "Column Break"
  },
  {
   "description": "Chien luoc lap lich duoc su dung",
   "fieldname": "scheduling_strategy",
   "fieldtype": "Select",
   "label": "Scheduling Strategy",
   "options": "Forward Scheduling\nBackward Scheduling\nPriority Based\nEDD (Earliest Due Date)",
   "reqd": 1
  },
  {
   "default": "Tier 1 - OR-Tools",
   "description": "Tier of hybrid APS system to use",
   "fieldname": "scheduling_tier",
   "fieldtype": "Select",
   "label": "Scheduling Tier",
   "options": "Tier 1 - OR-Tools\nTier 2 - RL Agent\nTier 3 - GNN"
  },
  {
   "default": "Now",
   "fieldname": "run_date",
   "fieldtype": "Datetime",
   "label": "Run Date"
  },
  {
   "fieldname": "executed_by",
   "fieldtype": "Link",
   "label": "Executed By",
   "options": "User"
  },
  {
   "collapsible": 1,
   "depends_on": "eval:doc.run_status=='Pending Approval' || doc.run_status=='Applied'",
   "fieldname": "section_approval",
   "fieldtype": "Section Break",
   "label": "Approval Status"
  },
  {
   "description": "T\u1ed5ng s\u1ed1 operations \u0111\u01b0\u1ee3c khuy\u1ebfn ngh\u1ecb",
   "fieldname": "total_operations",
   "fieldtype": "Int",
   "label": "Total Operations",
   "read_only": 1
  },
  {
   "description": "S\u1ed1 operations \u0111\u00e3 \u00e1p d\u1ee5ng",
   "fieldname": "applied_operations",
   "fieldtype": "Int",
   "label": "Applied Operations",
   "read_only": 1
  },
  {
   "fieldname": "column_break_approval",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "applied_at",
   "fieldtype": "Datetime",
   "label": "Applied At",
   "read_only": 1
  },
  {
   "fieldname": "applied_by",
   "fieldtype": "Link",
   "label": "Applied By",
   "options": "User",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "depends_on": "eval:doc.run_status!='Pending'",
   "fieldname": "section_constraints",
   "fieldtype": "Section Break",
   "label": "Scheduling Constraints Applied"
  },
  {
   "default": "1",
   "description": "Mỗi operation chỉ được lập lịch trên máy phù hợp với operation đó",
   "fieldname": "constraint_machine_eligibility",
   "fieldtype": "Check",
   "label": "Machine Eligibility",
   "read_only": 1
  },
  {
   "default": "1",
   "description": "Các operation trong cùng Work Order phải thực hiện theo thứ tự quy định",
   "fieldname": "constraint_precedence",
   "fieldtype": "Check",
   "label": "Operation Precedence",
   "read_only": 1
  },
  {
   "default": "1",
   "description": "Mỗi máy chỉ xử lý một operation tại một thời điểm",
   "fieldname": "constraint_no_overlap",
   "fieldtype": "Check",
   "label": "No Overlap (Machine)",
   "read_only": 1
  },
  {
   "fieldname": "column_break_constraints",
   "fieldtype": "Column Break"
  },
  {
   "default": "1",
   "description": "Lập lịch trong giờ làm việc của workstation (nếu có cấu hình)",
   "fieldname": "constraint_working_hours",
   "fieldtype": "Check",
   "label": "Working Hours",
   "read_only": 1
  },
  {
   "default": "1",
   "description": "Ưu tiên hoàn thành trước deadline của Work Order/Sales Order",
   "fieldname": "constraint_due_dates",
   "fieldtype": "Check",
   "label": "Due Date Respect",
   "read_only": 1
  },
  {
   "default": "0",
   "description": "Tính thời gian setup khi chuyển đổi sản phẩm trên máy",
   "fieldname": "constraint_setup_time",
   "fieldtype": "Check",
   "label": "Setup Time",
   "read_only": 1
  },
  {
   "description": "Mô tả chi tiết các ràng buộc và điều kiện tối ưu hóa",
   "fieldname": "constraints_description",
   "fieldtype": "Small Text",
   "label": "Constraints Description",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "depends_on": "eval:doc.run_status!='Pending'",
   "fieldname": "section_comparison",
   "fieldtype": "Section Break",
   "label": "Optimization Comparison (vs FIFO Baseline)"
  },
  {
   "description": "Makespan khi lập lịch theo FIFO (First In First Out)",
   "fieldname": "baseline_makespan_minutes",
   "fieldtype": "Int",
   "label": "Baseline Makespan (mins)",
   "read_only": 1
  },
  {
   "description": "Số job trễ khi lập lịch theo FIFO",
   "fieldname": "baseline_late_jobs",
   "fieldtype": "Int",
   "label": "Baseline Late Jobs",
   "read_only": 1
  },
  {
   "description": "Tổng độ trễ khi lập lịch theo FIFO",
   "fieldname": "baseline_total_tardiness",
   "fieldtype": "Int",
   "label": "Baseline Tardiness (mins)",
   "read_only": 1
  },
  {
   "fieldname": "column_break_comparison",
   "fieldtype": "Column Break"
  },
  {
   "description": "Phần trăm cải thiện makespan so với FIFO (số dương = tốt hơn)",
   "fieldname": "improvement_makespan_percent",
   "fieldtype": "Float",
   "label": "Makespan Improvement (%)",
   "read_only": 1
  },
  {
   "description": "Phần trăm giảm số job trễ so với FIFO (số dương = tốt hơn)",
   "fieldname": "improvement_late_jobs_percent",
   "fieldtype": "Float",
   "label": "Late Jobs Reduction (%)",
   "read_only": 1
  },
  {
   "description": "Phần trăm giảm tổng độ trễ so với FIFO (số dương = tốt hơn)",
   "fieldname": "improvement_tardiness_percent",
   "fieldtype": "Float",
   "label": "Tardiness Reduction (%)",
   "read_only": 1
  },
  {
   "description": "Tóm tắt so sánh hiệu quả tối ưu hóa",
   "fieldname": "comparison_summary",
   "fieldtype": "Small Text",
   "label": "Comparison Summary",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "section_solver_config",
   "fieldtype": "Section Break",
   "label": "Solver Configuration"
  },
  {
   "default": "300",
   "description": "Maximum solver time in seconds",
   "fieldname": "time_limit_seconds",
   "fieldtype": "Int",
   "label": "Time Limit (seconds)"
  },
  {
   "default": "10",
   "description": "Minimum gap between operations in minutes",
   "fieldname": "min_gap_between_ops",
   "fieldtype": "Int",
   "label": "Min Gap Between Ops (mins)"
  },
  {
   "fieldname": "column_break_solver",
   "fieldtype": "Column Break"
  },
  {
   "default": "1.0",
   "description": "Weight for makespan objective",
   "fieldname": "makespan_weight",
   "fieldtype": "Float",
   "label": "Makespan Weight"
  },
  {
   "default": "10.0",
   "description": "Weight for tardiness penalty",
   "fieldname": "tardiness_weight",
   "fieldtype": "Float",
   "label": "Tardiness Weight"
  },
  {
   "fieldname": "section_result",
   "fieldtype": "Section Break",
   "label": "Scheduling Summary"
  },
  {
   "description": "Tong so Job Card duoc lap lich",
   "fieldname": "total_job_cards",
   "fieldtype": "Int",
   "label": "Total Job Cards Scheduled",
   "read_only": 1
  },
  {
   "description": "So Job Card co nguy co tre han",
   "fieldname": "total_late_jobs",
   "fieldtype": "Int",
   "label": "Late Job Cards",
   "read_only": 1
  },
  {
   "description": "Number of jobs scheduled on time",
   "fieldname": "jobs_on_time",
   "fieldtype": "Int",
   "label": "Jobs On Time",
   "read_only": 1
  },
  {
   "fieldname": "column_break_result",
   "fieldtype": "Column Break"
  },
  {
   "description": "OR-Tools solver status",
   "fieldname": "solver_status",
   "fieldtype": "Select",
   "label": "Solver Status",
   "options": "\nNot Started\nRunning\nOptimal\nFeasible\nInfeasible\nTimeout\nError",
   "read_only": 1
  },
  {
   "description": "Time taken to solve",
   "fieldname": "solve_time_seconds",
   "fieldtype": "Float",
   "label": "Solve Time (seconds)",
   "read_only": 1
  },
  {
   "description": "Gap from optimal solution",
   "fieldname": "gap_percentage",
   "fieldtype": "Float",
   "label": "Optimality Gap (%)",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "section_metrics",
   "fieldtype": "Section Break",
   "label": "Performance Metrics"
  },
  {
   "description": "Total makespan of schedule",
   "fieldname": "makespan_minutes",
   "fieldtype": "Int",
   "label": "Makespan (minutes)",
   "read_only": 1
  },
  {
   "description": "Sum of all job tardiness",
   "fieldname": "total_tardiness_minutes",
   "fieldtype": "Int",
   "label": "Total Tardiness (minutes)",
   "read_only": 1
  },
  {
   "fieldname": "column_break_metrics",
   "fieldtype": "Column Break"
  },
  {
   "description": "Average machine utilization percentage",
   "fieldname": "machine_utilization",
   "fieldtype": "Float",
   "label": "Avg Machine Utilization (%)",
   "read_only": 1
  },
  {
   "fieldname": "section_llm_analysis",
   "fieldtype": "Section Break",
   "label": "LLM Analysis (AI Advisor)"
  },
  {
   "fieldname": "llm_analysis_button",
   "fieldtype": "Button",
   "label": "Get AI Analysis"
  },
  {
   "default": "vi",
   "fieldname": "llm_analysis_language",
   "fieldtype": "Select",
   "label": "Language",
   "options": "vi\nen"
  },
  {
   "fieldname": "column_break_llm",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "llm_analysis_date",
   "fieldtype": "Datetime",
   "label": "Analysis Date",
   "read_only": 1
  },
  {
   "fieldname": "llm_analysis_model",
   "fieldtype": "Data",
   "label": "Model Used",
   "read_only": 1
  },
  {
   "fieldname": "llm_analysis_content",
   "fieldtype": "Text Editor",
   "label": "AI Analysis & Recommendations",
   "read_only": 1
  },
  {
   "fieldname": "section_meta",
   "fieldtype": "Section Break",
   "label": "Additional Information"
  },
  {
   "fieldname": "notes",
   "fieldtype": "Small Text",
   "label": "Notes"
  }
 ],
 "grid_page_length": 50,
 "index_web_pages_for_search": 1,
 "links": [],
 "modified": "2026-01-07 01:50:45.736401",
 "modified_by": "Administrator",
 "module": "UIT APS",
 "name": "APS Scheduling Run",
 "owner": "Administrator",
 "permissions": [
  {
   "create": 1,
   "delete": 1,
   "email": 1,
   "export": 1,
   "print": 1,
   "read": 1,
   "report": 1,
   "role": "System Manager",
   "share": 1,
   "write": 1
  }
 ],
 "row_format": "Dynamic",
 "sort_field": "modified",
 "sort_order": "DESC",
 "states": []
}